<div class="main p-20 m-l-14">
    <span class="heading  m-t-12">Edit Candidate Details</span>
    <form [formGroup]="candidateForm" (ngSubmit)="submitClick(); $event.preventDefault()" enctype="multipart/form-data"
        class="p-t-6">
        <div class="d-flex parent p-t-10">
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">First Name<span class="required">*</span></span>
                <input type="text" class="input-box" formControlName="candidateFirstName" placeholder="John">
                <div
                    *ngIf="candidateForm.get('candidateFirstName')?.hasError('required') && candidateForm.get('candidateFirstName')?.touched">
                    <mat-error>First Name Required</mat-error>
                </div>
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Last Name<span class="required">*</span></span>
                <input type="text" class="input-box" formControlName="candidateLastName" placeholder="Deo">
                <div
                    *ngIf="candidateForm.get('candidateLastName')?.hasError('required') && candidateForm.get('candidateLastName')?.touched">
                    <mat-error>Last Name Required</mat-error>
                </div>
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Gender<span class="required">*</span></span>
                <div class="input-box c-pointer p-relative p-t-10 p-l-6 no-close" (click)="showGender = !showGender;">
                    <span *ngIf="!genderName">{{candidateDetails?.candidateGender}}</span>
                    <span *ngIf="genderName">{{genderName }}</span>
                    <span><i class="f-right p-r-10 fa fa-chevron-down s-text"></i></span>
                    <div class="no-close dropdown c-pointer" *ngIf="showGender">
                        <p *ngFor="let item of gender" (click)="selectGender(item)">
                            {{item}}</p>
                    </div>
                </div>
                <div
                    *ngIf="candidateForm.get('candidateGender')?.hasError('required') && candidateForm.get('candidateGender')?.touched">
                    <mat-error>Gender Required</mat-error>
                </div>
            </div>
        </div>
        <div class="d-flex  parent">
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">DOB</span>
                <div class="p-relative w-100">
                    <input class="p-l-5  input-box c-pointer" placeholder="MM/DD/YY" matInput
                        [matDatepicker]="pickerdate" (dateChange)="dateChange($event)" (click)="pickerdate?.open()"
                        [value]="displayDate" formControlName="candidateDoB">
                    <span> <mat-datepicker #pickerdate class=""></mat-datepicker>
                        <i class="fa fa-calendar-o c-pointer p-absolute calendar-icon" aria-hidden="true"
                            (click)="pickerdate ?.open()"></i>
                    </span>
                </div>
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Email<span class="required">*</span></span>
                <input type="text" class="input-box" formControlName="candidateemail">
                <div
                    *ngIf="candidateForm.get('candidateEmail')?.hasError('required') && candidateForm.get('candidateEmail')?.touched">
                    <mat-error>Email ID Required</mat-error>
                </div>
            </div>
            <div class="child d-flex m-b-10">

                <span class="label m-b-4">Mobile<span class="required">*</span></span>
                <input type="text" class="input-box" formControlName="candidateMobileNo" maxlength="10">
                <div
                    *ngIf="candidateForm.get('candidateMobileNo')?.hasError('required') && candidateForm.get('candidateMobileNo')?.touched">
                    <mat-error>Mobile No Required</mat-error>
                </div>
            </div>
        </div>
        <div class="d-flex parent">
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Education</span>
                <input type="text" class="input-box" formControlName="candidateEducation">
            </div>

            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Total Experience</span>
                <input type="text" class="input-box" formControlName="candidateTotalExperience">
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Relevant Experience</span>
                <input type="text" class="input-box" formControlName="candidateRevlentExperience">
            </div>
        </div>
        <div class="d-flex   parent">
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Previous Organization</span>
                <input type="text" class="input-box" formControlName="candidatePreviousOrg">
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Previous Designation</span>
                <input type="text" class="input-box" formControlName="candidatePreviousDesignation">
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Current Salary</span>
                <input type="text" class="input-box" formControlName="candidateCurrentSalary">
            </div>
        </div>
        <div class="d-flex   parent">
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Expected Salary</span>
                <input type="text" class="input-box" formControlName="candidateExpectedSalary">
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">City</span>
                <input type="text" class="input-box" formControlName="candidateCurrentSalary">
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">District</span>
                <input type="text" class="input-box" formControlName="candidateExpectedSalary">
            </div>
        </div>
        <div class="d-flex parent">
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">State</span>
                <input type="text" class="input-box" formControlName="candidateExpectedSalary">
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Preferred Location</span>
                <div class="input-box c-pointer p-relative p-t-10 p-l-6 no-close"
                    (click)="locationListOpen = !locationListOpen">
                    <span *ngIf="!locationname" class="no-close">{{candidateDetails?.candidatePreferlocation}}</span>
                    <span *ngIf="locationname" class="no-close">{{locationname}}</span>
                    <span><i class="f-right p-r-10 fa fa-chevron-down s-text no-close"></i></span>
                    <div class="no-close dropdown c-pointer no-close" *ngIf="locationListOpen">
                        <p *ngFor="let item of preferredLocation" (click)="selectLocation(item.location)">
                            {{item.location}}</p>
                    </div>
                </div>
            </div>
            <div class="child d-flex m-b-10">
                <span class="label m-b-4">Application Source</span>
                <div class="input-box c-pointer p-relative p-t-10 p-l-6 no-close"
                    (click)="showSource = !showSource;fetchSource()">
                    <span *ngIf="!sourceName">{{candidateDetails?.resumeSourecd}}</span>
                    <span *ngIf="sourceName">{{sourceName}}</span>
                    <span><i class="f-right p-r-10 fa fa-chevron-down s-text"></i></span>
                    <div class="no-close dropdown c-pointer" *ngIf="showSource">
                        <p *ngFor="let source of sourceList" (click)="selectsource(source.sourceId,source.sourceName)">
                            {{source.sourceName}}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="child d-flex m-b-10 p-relative">
            <span class="label m-b-4">Uploaded Resume</span>
            <div class="d-flex c-pointer">
                <img src="assets/images/file-uploaded.png" alt="" height="44px"
                    (click)="viewResume(candidateDetails?.candidateResume)">
                <span *ngIf="!resumeUploadSuccess" class="upload-success-message"
                    (click)="triggerFileInput();$event.stopPropagation();$event.preventDefault();">
                    Click to edit resume
                </span>
                <input type="file" #fileInput class="input-box" style="display:none" (change)="onFileSelected($event)">
                <span *ngIf="resumeUploadSuccess" class="upload-success-message">
                    Resume uploaded successfully!
                </span>
            </div>
        </div>
        <div class="skills p-10">
            <div class="parent">
                <div class="child d-flex m-b-10">
                    <span class="text m-b-4 no-close">Edit Skill Sets</span>
                </div>
                <div class="child-skill d-flex m-b-10 j-space">
                    <div *ngIf="candidateDetails?.candidatePrimarySkills.length > 0 || candidateDetails?.candidatePrimarySkills.length > 0"
                        class="selected-skills d-flex">
                        <div class="primary-skills">
                            <div class="d-flex j-around align-center">
                                <div>Selected Primary Skills</div>
                                <div class=" skill-search-bar c-pointer p-t-10 no-close"
                                    (click)="toggleSearchBarPrimary()">
                                    <input type="search" class="input-search p-l-8"
                                        placeholder="Search primary skills..." (input)="getSkillSuggestions($event)">
                                    <div class="m-t-8 skill-drop-list c-pointer" *ngIf="showPrimary">
                                        <div *ngFor="let suggestion of skillSuggestions"
                                            (click)="selectSkill(suggestion,'primary')">
                                            <span class="p-t-7" *ngIf="showPrimary">
                                                <img src="assets/images/akar-icons_check.png" alt="" class="m-t-0 p-r-4"
                                                    width="13px" height="10px">
                                            </span>
                                            <span class="c-pointer" *ngIf="showPrimary">{{suggestion?.skillName}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <ul>
                                <li *ngFor="let skill of selectedPrimarySkills" class="p-4">
                                    {{skill?.name | titlecase}}
                                    <i class="fa fa-trash-o delete-color c-pointer" aria-hidden="true"
                                        (click)="removeSkill(skill, 'primary')"></i>
                                </li>
                            </ul>
                        </div>
                        <div class="secondary-skills">
                            <div class="d-flex j-around align-center">
                                <div>Selected Secondary Skills</div>
                                <div class=" skill-search-bar c-pointer p-t-10 no-close"
                                    (click)="toggleSearchBarSecondary()">
                                    <input type="search" class="input-search p-l-8"
                                        placeholder="Search secondary skills..." (input)="getSkillSuggestions($event)">
                                    <div class="m-t-8 skill-drop-list c-pointer" *ngIf="showSecondary">
                                        <div *ngFor="let suggestion of skillSuggestions"
                                            (click)="selectSkill(suggestion,'secondary')">
                                            <span class="p-t-7" *ngIf="showSecondary">
                                                <img src="assets/images/akar-icons_check.png" alt="" class="m-t-0 p-r-4"
                                                    width="13px" height="10px">
                                            </span>
                                            <span class="c-pointer">{{suggestion?.skillName}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <ul>
                                <li *ngFor="let skill of selectedSecondarySkills" class="p-4">
                                    {{skill?.name | titlecase}}
                                    <i class="fa fa-trash-o delete-color c-pointer" aria-hidden="true"
                                        (click)="removeSkill(skill, 'secondary')"></i>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex f-right btns">
            <span class="cancel-btn c-pointer" (click)="cancel()">Cancel</span>
            <button class="add-candidate c-pointer" type="submit">Update</button>
        </div>
    </form>
</div>