<div class="modal-header heading p-10 p-t-20 d-flex j-space">
    <div>
        <span>{{candidateDetails['candidate.candidateFirstName']}} {{candidateDetails['candidate.candidateLastName']}}- </span>
        <span class="blue">( {{candidateDetails['candidate.candidateId']}} )</span>
    </div>
    <div class="modal-close">
        <span class="p-10" [ngClass]="{'blue': candidateDetails?.serviceStatus === 'pending','green': candidateDetails?.serviceStatus === 'done',
            'red': candidateDetails?.serviceStatus === 'rejected'}">
            {{candidateDetails?.serviceStatus | titlecase}}
        </span>
        <button class="c-pointer" (click)="closeDialog()">
            <mat-icon>close</mat-icon>
        </button>
    </div>
</div>
<div class="modal-content">
    <div class="d-flex p-10">
        <div class="sub-head f-w-500 f-s-14 d-flex">
            <span class="p-8">Skills</span>
            <span class="p-8">Experience</span>
            <span class="p-8">Base Salary</span>
            <span class="p-8">Max Salary</span>
        </div>
        <div class="sub-head d-flex">
            <span class="p-8"> : {{candidateDetails['serviceRequest.requestSkills']}}</span>
            <span class="p-8"> : {{candidateDetails['serviceRequest.requestExperience']}}</span>
            <span class="p-8"> : {{candidateDetails['serviceRequest.requestBaseSalary']}}</span>
            <span class="p-8"> : {{candidateDetails['serviceRequest.requestMaxSalary']}}</span>
        </div>
    </div>
    <div class="heading p-10 d-flex j-space">
        <span>Candidate Details</span>
        <span class="c-pointer"><span class="f-s-14 f-w-400">Resume : </span>
            <i class="fa fa-file-text-o p-l-5 blue" aria-hidden="true" title="View resume" (click)="viewResume(candidateDetails['candidate.candidateResume'])"></i>
        </span>
    </div>
    <div class="d-flex p-10">
        <div class="sub-head f-w-500 f-s-14 d-flex">
            <span class="p-8">Date of Birth</span>
            <span class="p-8">Skills</span>
            <span class="p-8">Previous Organisation</span>
            <span class="p-8">Previous Designation</span>
            <span class="p-8">Education</span>
            <span class="p-8">Expected Salary</span>
            <span class="p-8">Address</span>
        </div>
        <div class="sub-head d-flex">
            <span class="p-8">
                : {{candidateDetails['candidate.candidateDoB'] ?(candidateDetails['candidate.candidateDoB'] | date:
                'dd/MM/YYY' ): 'NIL' }}
            </span>
            <span class="p-8">
                : {{candidateDetails['serviceRequest.requestSkills'] ? candidateDetails['serviceRequest.requestSkills']
                : 'NIL'}}
            </span>
            <span class="p-8">
                : {{candidateDetails['candidate.candidatePreviousOrg'] ?
                candidateDetails['candidate.candidatePreviousOrg'] : 'NIL'}}
            </span>
            <span class="p-8">
                : {{candidateDetails['candidate.candidatePreviousDesignation'] ?
                candidateDetails['candidate.candidatePreviousDesignation'] : 'NIL'}}
            </span>
            <span class="p-8">
                : {{candidateDetails['candidate.candidateEducation'] ? candidateDetails['candidate.candidateEducation']
                : 'NIL'}}
            </span>
            <span class="p-8">
                : {{candidateDetails['candidate.candidateExpectedSalar'] ?
                candidateDetails['candidate.candidateExpectedSalar'] : 'NIL'}}
            </span>
            <span class="p-8">
                : {{candidateDetails['candidate.candidateCity'] ? candidateDetails['candidate.candidateCity'] :
                'City'}},
                {{candidateDetails['candidate.candidateDistrict'] ? candidateDetails['candidate.candidateDistrict']
                :'District '}},
                {{candidateDetails['candidate.candidateState'] ? candidateDetails['candidate.candidateState'] :
                'State'}}
            </span>
        </div>
    </div>
    <div class="heading p-10">
        <span>Add Progress</span>
    </div>
    <div class="d-flex p-10">
        <div class="sub-head f-w-500 f-s-14 d-flex">
            <span class="p-10">Skill</span>
            <span class="p-10 p-t-12">Score</span>
            <span class="p-10 p-t-12">Description</span>
            <span class="p-10 p-t-15">Attachment</span>
        </div>
        <div class="sub-head d-flex"
            *ngIf="!progessAdded && candidateDetails?.serviceStatus !== 'done' && candidateDetails?.serviceStatus !== 'moved'">
            <span class="p-5">
                <input class="input" *ngIf="!candidateDetails['progress.progressSkills']" type="text" id="skill">
            </span>
            <span class="p-5">
                <input class="input" *ngIf="!candidateDetails['progress.progressScore']" type="text" id="score">
            </span>
            <span class="p-5">
                <input class="input" *ngIf="!candidateDetails['progress.progressDescription']" type="text"
                    id="description">
            </span>
            <span class="c-pointer attach m-l-5 p-r-5 p-b-5 d-flex file" title="Attach File" (click)="fileInput.click()">
                <img class="p-5" src="/assets/images/paperclip.svg" alt="" height="20" width="20">
                <span class="m-b-10 p-5"> {{fileName}}</span>
                <input type="file" id="fileInput" #fileInput style="display: none;" (change)="onFileSelected($event)">
            </span>
        </div>
        <div class="sub-head d-flex" *ngIf="data?.progressStatus > 0 || candidateDetails?.serviceStatus === 'moved'">
            <span class="p-10">
                : {{candidateDetails['progress.progressSkills'] ? candidateDetails['progress.progressSkills'] : 'NIL'}}
            </span>
            <span class="p-10 p-t-12">
                : {{candidateDetails['progress.progressScore'] ? candidateDetails['progress.progressScore'] : 'NIL'}}
            </span>
            <span class="p-10">
                : {{candidateDetails['progress.progressDescription'] ? candidateDetails['progress.progressDescription']: 'Nil'}}
            </span>
            <span class="p-10 p-t-15 c-pointer">
                : <i class="fa fa-file-text-o p-l-5 blue f-s-22" aria-hidden="true" title="View Attachment"
                    (click)="viewResume(candidateDetails['progress.progressFile'])"></i><br>
                <span class="p-l-5 f-s-10">Attachment</span>
            </span>
        </div>
    </div>
    <div *ngIf="!progessAdded && candidateDetails?.serviceStatus !== 'done' && candidateDetails?.serviceStatus !== 'moved'"
        class="details p-10 d-flex j-end w-95">
        <span class="f-w-500 head-wrap"></span>
        <button class="btn c-pointer" (click)="addProgress()">Add progress</button>
    </div>
    <div *ngIf="this.data?.candidateDetails?.serviceStatus === 'pending' && progessAdded">
        <!-- <div> -->
        <button class="select-btn" [ngClass]="{'offer-select-btn': messageType === 'approve'}"
            (click)="showMail('approve')">Interview Invitation Mail
        </button>
        <button class="reject-btn" [ngClass]="{'offer-reject-btn': messageType === 'rejection'}"
            (click)="showMail('rejection')">Rejection Notification Mail
        </button>
        <div *ngIf="this.data?.candidateDetails?.serviceStatus === 'pending' && progessAdded && messageType.trim() !== ''">
            <!-- <div> -->
            <div class="heading p-10">
                <span >Email Details of 
                    {{candidateDetails['candidate.candidateFirstName']}} {{candidateDetails['candidate.candidateLastName']}}
                </span>
            </div>
            <div *ngIf="!isEditable" class="f-right m-10 p-10 c-pointer" (click)="isEditable = !isEditable;" title="Edit">
                <span><img src="/assets/images/candidate-detail/edit.svg" alt="" height="12" width="12"></span>
                <span class="c-blue p-l-5">Edit</span>
            </div>
            <div *ngIf="isEditable" class="f-right m-10 p-10 c-pointer" (click)="isEditable = !isEditable;" title="Save">
                <span><img src="/assets/images/candidate-detail/save.svg" alt="" height="12" width="12"></span>
                <span class="c-blue p-l-5">Save</span>
            </div>
            <div class="m-10">
                <div class="template" #template style="
                background-color: #FFFFFF;   
                width: 98%;
                height: fit-content;
                top: 536px;
                left: 31px;
                gap: 0px;
                opacity: 0px;
                outline: none !important;
                padding: 10px;">
                    <div>Dear {{candidateDetails['candidate.candidateFirstName']}} {{candidateDetails['candidate.candidateLastName']}},</div>
                    <textarea class="editable p-t-10 p-b-10" id="editable" [(ngModel)]="templateData.message" (input)="updateHtmlContent($event)"   [readonly]="!isEditable"
                    style="width: 100%; outline: none !important; border: none !important; min-height: 200px;
                    ">
                    </textarea><br>          
                    <span>Best Regards,</span>
                    <div class="d-flex m-t-20" style="display: flex; margin-top: 20;">
                        <div class="company-logo" style="  margin-right: 10px;
                        padding-right: 20px;
                        border-right: 1px solid #575F6E;">
                            <img src="https://pbs.twimg.com/profile_images/1253628460645269509/0Ep8ds_n_400x400.jpg" alt="" width="110px" height="90px"></div>
                        <div>
                            <span style="font-weight: 500;">JiJi George</span><br>
                            <span style="font-weight: 500;">Associate Talent Aquisition</span>
                            <pre>Techversant Infotech Pvt Ltd,<br>Module No:2306,Third Floor, Yamuna, Tower II,<br>Technopark Phase III SEZ Campus,<br>Trivandrum Kerala 695 581 </pre>
                            <span>p:+91-471-4014953 |</span><br>
                            <span><img src="https://ci3.googleusercontent.com/meips/ADKq_Nb4TwoHV9L4Pn9DRrp6vNCyU2A1NbooQ4hoVACqAVnUM0xYoySUxn5lbqBh6hEbk93JUR_a1C_WmoROWqfsW95ChnFkCKU=s0-d-e1-ft#http://www.techversantinfotech.com/images/fb.png" alt="">
                                <a href="https://www.facebook.com/Techversant"></a>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="attachment m-10 p-8">
                <div class="m-10">
                    <span class="p-10 sub-head">Email Subject</span>
                    <span class="p-5"><input class="input w-97" type="text" id="subject"></span>
                </div>
                <div class="m-10">
                    <span class="p-10 sub-head">Email CC</span>
                    <span class="p-5"><input class="input w-97" type="text" id="cc"></span>
                </div>
                <div class="m-10">
                    <span class="p-10 sub-head">Add Feedback</span>
                    <textarea class="text-area" id="feedback" cols="30" rows="10"></textarea>
                </div>
                <div class="m-15">
                    <input type="checkbox" id="confirmDetails"><span>Confirm all Details</span>
                </div>
                <div class="m-10 d-flex j-end">
                    <button class="c-pointer btn-reject" (click)="cancelClick()">Cancel</button>
                    <button class="btn c-pointer" (click)="submitClick()">Submit</button>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="this.data?.candidateDetails?.serviceStatus === 'done' || this.data?.candidateDetails?.serviceStatus === 'rejected'">
        <div class="heading p-10">
            <span>Feedback</span>
        </div>
        <div class="sub-head d-flex">
            <span class="p-10" *ngIf="candidateDetails['reqCandidateComment.commentComment']">
                {{candidateDetails['reqCandidateComment.commentComment'] ?
                candidateDetails['reqCandidateComment.commentComment'] : 'Not Updated'}}
            </span>
        </div>
    </div>
</div>