<div class="modal-header heading p-10 p-t-20 d-flex j-space" style="position: sticky; top: 0; z-index: 2;">
    <div *ngIf="loader" class="loader-parent">
        <img src="assets/gif/loader.gif">
    </div>
    <div>
        <span>{{candidateDetails['candidate.candidateFirstName']}} {{candidateDetails['candidate.candidateLastName']}} &nbsp;- </span>
        <span class="blue">( 
            <a [href]="env_url + '/dashboard/candidate-details/' + candidateDetails['candidate.candidateId']">
                {{candidateDetails['candidate.candidateId']}}
            </a>)
        </span>
    </div>
    <div class="modal-close">
        <span class="p-10" [ngClass]="{'blue': candidateDetails?.serviceStatus === 'pending','green': candidateDetails?.serviceStatus === 'done',
            'red': candidateDetails?.serviceStatus === 'rejected'}">{{candidateDetails?.serviceStatus | titlecase}}
        </span>
        <button class="c-pointer" (click)="closeDialog()"><mat-icon>close</mat-icon></button>
    </div>
</div>
<div class="modal-content">
    <div class="d-flex flex-1">
        <div class="w-50">
            <div class="heading p-10 d-flex j-space">
                <span>Requirement Details</span>
            </div>
            <div class="d-flex p-10">
                <div class="sub-head">
                    <span class="key p-8">Requirement Name</span>
                    <span class="key p-8">Skills</span>
                    <span class="key p-8">Minimum Experience</span>
                    <span class="key p-8">Maximum Experience</span>
              
                    <span class="key p-8">Requirement Status</span>
                    <span class="key p-8">Requirement Vacancy</span>
                    <!-- <span class="key p-8">Posting Date</span>
                    <span class="key p-8">Closing Date</span> -->
                    <!-- <span class="key p-8">Job Description</span> -->
                </div>
                <div class="sub-head">
                    <span class="p-8 job-description"> : 
                        <a [href]="env_url + '/dashboard/series?requestId=' + candidateDetails['serviceRequest.requestId']">
                          {{ candidateDetails['serviceRequest.requestName'] | titlecase }}
                        </a>
                      </span>
                    <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestSkills'] | titlecase}}</span>
                    <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestMinimumExperience']}}</span>
                    <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestMaximumExperience']}}</span>

                    <!-- <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestBaseSalary']}}</span>
                    <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestMaxSalary']}}</span> -->
                    <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestStatus']}}</span>
                    <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestVacancy']}}</span>
                    <!-- <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestPostingDate']  | date: 'dd/MM/YYY' }}</span>
                    <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestClosingDate']  | date: 'dd/MM/YYY' }}</span> -->
                    <!-- <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestDescription'] }}</span> -->
                </div>
            </div>
            <div class="w-40">
                <div class="heading p-10 d-flex j-space">
                    <span>Interview Details</span>
                </div>
                <div class="d-flex p-10">
                    <div class="sub-head f-w-500 f-s-14 d-flex">
                        <div class="p-8 key">Scheduled Date</div>
                        <div class="p-8 key">Scheduled time</div>
                        <div class="p-8 key">Panel</div>
                        <div class="p-8 key">Inteview Satus</div>
                        <div class="p-8 key">Inteview Mode</div>
                        <!-- <div class="p-8 key">Feedback</div> -->
                    </div>
                    <div class="sub-head">
                        <span class="p-8 job-description"> : {{candidateDetails?.interviewTime  | date: 'dd/MM/YYY'}}</span>
                        <span class="p-8 job-description"> : {{candidateDetails?.interviewTime  | date: 'hh:mm a'}}</span>
                        <span class="p-8 job-description"> : {{candidateDetails?.pannelName | titlecase}}</span>
                        <span class="p-8 job-description"> : {{candidateDetails?.interviewstatus}}</span>
                        <span class="p-8 job-description"> : {{candidateDetails?.interviewMode ? candidateDetails?.interviewMode : 'Not Updated'}}</span>
                        <!-- <span class="p-8 job-description"> : {{candidateDetails['serviceRequest.requestBaseSalary']}}</span> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="w-50 border">
            <div class="heading p-10 d-flex j-space">
                <span>Candidate Details</span>
                <span class="c-pointer"><span class="f-s-14 f-w-400">Candidate Resume : </span>
                <i class="fa fa-file-text-o p-l-5 blue" aria-hidden="true" title="View resume" (click)="viewResume(candidateDetails['candidate.candidateResume'])"></i>
            </span>
            </div>
            <div class="d-flex p-10">
                <div class="sub-head f-w-500 f-s-14 d-flex">
                    <div class="p-8">Contact Number</div>
                    <div class="p-8">Mail</div>
                    <div class="p-8">Date of Birth</div>
                    <div class="p-8">Skills</div>
                    <div class="p-8">Previous Organisation</div>
                    <div class="p-8">Previous Designation</div>
                    <div class="p-8">Education</div>
                    <div class="p-8">Relevant Experience</div>
                    <div class="p-8">Total Experience</div>
                    <div class="p-8">City</div>
                    <div class="p-8">District</div>
                    <div class="p-8">State</div>
                </div>
                <div class="sub-head d-flex">
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateMobileNo'] ?(candidateDetails['candidate.candidateMobileNo']): '0000000000' }}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateEmail'] ? candidateDetails['candidate.candidateEmail'] : 'NIL'}}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateDoB'] ?(candidateDetails['candidate.candidateDoB'] | date: 'dd/MM/YYY' ): 'NIL' }}
                    </div>
                    <div class="p-8 d-flex">
                        : <span class="p-l-3" *ngFor="let item of candidateDetails?.skills; let last = last">
                            {{item?.skillName ? (item?.skillName | titlecase ): 'NIL'}} <span *ngIf="!last">,</span>
                        </span>
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidatePreviousOrg'] ? candidateDetails['candidate.candidatePreviousOrg'] : 'NIL'}}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidatePreviousDesignation'] ? candidateDetails['candidate.candidatePreviousDesignation'] : 'NIL'}}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateEducation'] ? candidateDetails['candidate.candidateEducation']: 'NIL'}}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateRevlentExperience'] ? candidateDetails['candidate.candidateRevlentExperience'] : '0'}}
                    </div> <div class="p-8">
                        : {{candidateDetails['candidate.candidateTotalExperience'] ? candidateDetails['candidate.candidateTotalExperience'] : 'NIL'}}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateCity'] ? candidateDetails['candidate.candidateCity'] :'City'}}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateDistrict'] ? candidateDetails['candidate.candidateDistrict']:'District '}}
                    </div>
                    <div class="p-8">
                        : {{candidateDetails['candidate.candidateState'] ? candidateDetails['candidate.candidateState'] :'State'}}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Initial buttons -->
    <div *ngIf="!progessAdded && candidateDetails?.serviceStatus === 'pending' && !progessAdded"
        class="details p-10 d-flex j-end w-97">
        <button class="select-btn" (click)="selectButton('reschedule');showMail('re-schedule')" [ngClass]="{'offer-reject-btn': buttonType === 'reschedule'}">Reschedule Inteview</button>
        <button class="select-btn" (click)="selectButton('rejection');showMail('')"  [ngClass]="{'offer-reject-btn': buttonType === 'rejection'}" >Rejection</button>
        <button class="select-btn" (click)="selectButton('add');showMail('')"  [ngClass]="{'offer-reject-btn': buttonType === 'add'}" >Add Progress</button>
    </div>
    <!-- Add progress -->
    <div class="progress" *ngIf="!progessAdded && candidateDetails?.serviceStatus === 'pending' && !progessAdded && buttonType.trim() === 'add'">
        <div class="heading p-10">
            <span>Add Progress</span>
        </div>
        <div class="d-flex m-10"
            *ngIf="!progessAdded && candidateDetails?.serviceStatus !== 'done' && candidateDetails?.serviceStatus !== 'moved'">
            <div>
                <span class="p-10 sub-head">Skill</span>
                <span class="p-5 m-r-5"><input class="input-1" *ngIf="!candidateDetails['progress.progressSkills']" type="text" id="skill"></span>
            </div>
            <div>
                <span class="p-10 sub-head">Score</span>
                <div class="p-relative w-100 m-l-10">
                    <span class="p-5 m-r-5"> <input class="input-1" *ngIf="!candidateDetails['progress.progressScore']"
                            type="text" id="score"></span>
                </div>
            </div>
        </div>
        <div class="m-10">
            <span class="p-10 sub-head">Add Attachment</span>
            <span class="c-pointer attach m-l-5 p-r-5 p-b-5 d-flex file" title="Attach File" (click)="fileInput.click()">
                <img class="p-5" src="/assets/images/paperclip.svg" alt="" height="20" width="20">
                <span class="m-b-10 p-5" *ngIf="fileName"> {{fileName}}</span>
                <span class="m-b-10 p-5" *ngIf="!fileName">Upload File</span>
                <input type="file" id="fileInput" #fileInput style="display: none;" (change)="onFileSelected($event)">
            </span>
        </div>
        <div class="m-10">
            <span class="p-10 sub-head">Add Description</span>
            <textarea class="text-area  m-l-5 p-r-5 p-b-5" *ngIf="!candidateDetails['progress.progressDescription']" id="description"></textarea>
        </div>
        <div *ngIf="!progessAdded && candidateDetails?.serviceStatus !== 'done' && candidateDetails?.serviceStatus !== 'moved'" class="details p-10 d-flex j-end w-97">
            <button class="btn c-pointer" (click)="addProgress()">Add progress</button>
        </div>
    </div>
    <!-- Back-off Or Panel Rejection -->
    <div class="progress" *ngIf="!progessAdded && candidateDetails?.serviceStatus === 'pending' && !progessAdded && buttonType.trim() === 'rejection'">
        <div class=" p-10 d-flex j-space m-r-20">
            <span class="f-w-500 f-s-20">Reason For Rejection</span>
            <span class="input-rejection c-pointer no-close p-relative p-t-8">
                <span class="no-close p-l-10 f-s-14 f-w-400" (click)="filterStatus = !filterStatus">{{filteredStatus.trim()
                    === '' ? 'Select Reason for Rejection' : filteredStatus | titlecase}}</span>
                <span class="f-right">
                    <!-- <span *ngIf="filteredStatus && filteredStatus.trim() !== ''" (click)="clearFilter('status')" class="clear-filter">x</span> -->
                    <span (click)="filterStatus = !filterStatus"><i
                            class="p-l-8 p-r-10 fa fa-chevron-down no-close'"></i></span>
                </span>
                <div class="dropdown c-pointer no-close'" *ngIf="filterStatus">
                    <span class="d-flex p-0" *ngFor="let type of status"
                        (click)="selectStatusFilter(type?.status);filterStatus = !filterStatus">
                        <span class="p-l-20 p-5 f-s-14 f-w-400">{{type?.status | titlecase}}</span>
                    </span>
                </div>
            </span>
        </div>
        <div class="m-10">
            <span class="p-10 sub-head">Add Description</span>
            <textarea class="text-area p-5" id="" id="feedback"></textarea>
        </div>
        <div *ngIf="!progessAdded && candidateDetails?.serviceStatus !== 'done' && candidateDetails?.serviceStatus !== 'moved'"
            class="details p-10 d-flex j-end w-97">
            <button class="btn c-pointer" (click)="rejectClick('')">Submit</button>
        </div>
    </div>
    <!-- Added Progress -->
    <div class="head p-10 d-flex j-space" *ngIf="data?.progressStatus > 0 || candidateDetails?.serviceStatus === 'moved'">
        <span>Added Progress</span>
    </div>
    <div class="d-flex p-10 progress" *ngIf="data?.progressStatus > 0 || candidateDetails?.serviceStatus === 'moved'">   
        <div class="sub-head f-w-500 f-s-14 d-flex">
            <span class="p-8" *ngIf="candidateDetails['progress.progressSkills'] ">Skill</span>
            <span class="p-8" *ngIf="candidateDetails['progress.progressScore']">Score</span>
            <span class="p-8">Attached File</span>
            <span class="p-8">Description</span>
        </div>
        <div class="sub-head d-flex">
            <span class="p-8" *ngIf="candidateDetails['progress.progressSkills']"> : {{candidateDetails['progress.progressSkills'] ? candidateDetails['progress.progressSkills'] : 'NIL'}}</span>
            <span class="p-8" *ngIf="candidateDetails['progress.progressScore']"> : {{candidateDetails['progress.progressScore'] ? candidateDetails['progress.progressScore'] : 'NIL'}}</span>
            <span class="p-8"> : <i class="fa fa-file-text-o p-l-5 blue f-s-22" aria-hidden="true" title="View Attachment"
                (click)="viewResume(candidateDetails['progress.progressFile'])"></i>
                <span class="p-l-5">{{candidateDetails['progress.progressFile']}}</span>
            </span>
                <span class="p-8"> : {{candidateDetails['progress.progressDescription'] ? candidateDetails['progress.progressDescription']: 'Nil'}}</span>
        </div>
    </div>  
        <!-- Next Round Approval or Rejection After Adding Progress -->
    <div *ngIf="candidateDetails?.serviceStatus === 'pending' && candidateDetails['progress.progressId'] !== null">
        <button class="select-btn" [ngClass]="{'offer-select-btn': messageType === 'approve'}"
            (click)="showMail('approve')">Interview Invitation Mail
        </button>
        <button class="reject-btn" [ngClass]="{'offer-reject-btn': messageType === 'rejection'}"
            (click)="showMail('rejection')">Rejection Notification Mail
        </button>
    </div>
        <!-- Reschedule Interview / send Approval mail for next round / Rejection mail -->
        <div *ngIf="candidateDetails?.serviceStatus === 'pending' && messageType.trim() !== ''">
            <app-mail-template [candidate]="mailTemplateData" (submitData)="onSubmitData($event)"></app-mail-template>
        </div>
    
    <div *ngIf="this.data?.candidateDetails?.serviceStatus === 'done' || this.data?.candidateDetails?.serviceStatus === 'rejected'">
        <div class="head p-10">
            <span>Feedback</span>
        </div>
        <div class="sub-head d-flex">
            <span class="p-10" *ngIf="candidateDetails['reqCandidateComment.commentComment']">
                {{candidateDetails['reqCandidateComment.commentComment'] ? candidateDetails['reqCandidateComment.commentComment'] : 'Not Updated'}}
            </span>
        </div>
    </div>
</div>